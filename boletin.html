<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bolet√≠n Mensual ‚Äì Herencia Justa</title>
  <!-- Tipograf√≠as coherentes con el resto del sitio -->
  <link href="https://fonts.googleapis.com/css2?family=Lora:wght@400;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Lora', serif;
      margin: 0;
      padding: 0;
      background-color: #f2f4f8;
      color: #1b263b;
    }
    /* Navegaci√≥n principal compartida */
    .main-nav {
      display: flex;
      justify-content: center;
      gap: 1rem;
      background-color: #0d1b2a;
      padding: 1rem;
      flex-wrap: wrap;
    }
    .main-nav a {
      color: #ffffff;
      text-decoration: none;
      font-weight: bold;
    }
    .main-nav a:hover {
      color: #d4af37;
    }
    /* Secci√≥n hero */
    .hero-section {
      background: linear-gradient(rgba(13,27,42,0.85), rgba(27,38,59,0.85));
      color: #fff;
      text-align: center;
      padding: 4rem 2rem;
    }
    .hero-section h1 {
      color: #d4af37;
      font-size: 2.4rem;
      margin-bottom: 0.5rem;
      font-family: 'Playfair Display', serif;
    }
    .hero-section p {
      font-size: 1.2rem;
      max-width: 700px;
      margin: 0 auto;
    }
    main {
      max-width: 1100px;
      margin: 2rem auto;
      padding: 1rem;
    }
    h2 {
      color: #0d1b2a;
      font-family: 'Playfair Display', serif;
      font-size: 2rem;
      margin-bottom: 1rem;
    }
    /* Contenedor de filtros y b√∫squeda */
    #filtros {
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
      margin-bottom: 1.5rem;
    }
    #busqueda {
      flex: 1 1 250px;
      padding: 0.6rem;
      border: 1px solid #ccc;
      border-radius: 4px;
      font-family: 'Lora', serif;
      font-size: 1rem;
    }
    #categoria-select {
      flex: 1 1 200px;
      padding: 0.6rem;
      border: 1px solid #ccc;
      border-radius: 4px;
      font-family: 'Lora', serif;
      font-size: 1rem;
    }
    /* Tarjetas de art√≠culos (heredan estilo de las news-card en index) */
    .art-card {
      background-color: #ffffff;
      border-radius: 10px;
      overflow: hidden;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      display: flex;
      flex-direction: column;
    }
    .art-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 20px rgba(0,0,0,0.15);
    }
    .art-card img {
      width: 100%;
      height: 200px;
      object-fit: cover;
    }
    /* Placeholder para art√≠culos sin imagen */
    .art-placeholder {
      width: 100%;
      height: 200px;
      background-color: #14213d;
      color: #d4af37;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 3rem;
      font-weight: bold;
      text-transform: uppercase;
    }
    .art-card h3 {
      margin: 1rem 1rem 0.5rem;
      font-size: 1.4rem;
      color: #0d1b2a;
    }
    .art-card p.meta {
      margin: 0 1rem 0.5rem;
      color: #666;
      font-size: 0.9rem;
    }
    .art-card p.excerpt,
    .art-card .full-content p {
      margin: 0 1rem;
      color: #444;
      text-align: justify;
    }
    .art-card .full-content {
      display: none;
      margin-bottom: 1rem;
    }
    .art-card .btn-leer-mas {
      margin: 1rem;
      padding: 0.5rem 1rem;
      background-color: #d4af37;
      color: #fff;
      border: none;
      border-radius: 4px;
      font-size: 0.9rem;
      font-weight: bold;
      cursor: pointer;
      transition: background-color 0.2s ease;
    }
    .art-card .btn-leer-mas:hover {
      background-color: #c39c2a;
    }
    .art-card a {
      color: #0d1b2a;
      text-decoration: underline;
    }
    /* Rejilla de art√≠culos */
    .art-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 1.5rem;
    }
    footer {
      text-align: center;
      padding: 2rem 1rem;
      background-color: #0d1b2a;
      color: #ccc;
      font-size: 0.9rem;
      margin-top: 3rem;
    }
  </style>
</head>
<body>
  <header>
    <!-- Navegaci√≥n coherente con otras p√°ginas -->
    <nav class="main-nav">
      <a href="index.html">Inicio</a>
      <a href="boletin.html" class="activo">Bolet√≠n</a>
      <a href="membresias.html">Membres√≠as</a>
      <a href="consulta-gratuita.html">Consulta Legal</a>
      <a href="index.html#contacto">Contacto</a>
    </nav>
    <!-- Hero con t√≠tulo del bolet√≠n -->
    <div class="hero-section">
      <h1>üìö Bolet√≠n Mensual</h1>
      <p>Art√≠culos ciudadanos, an√°lisis y reflexi√≥n desde la juventud y la ciudadan√≠a.</p>
    </div>
  </header>
  <main>
    <section>
      <h2>√öltimos art√≠culos</h2>
      <div id="filtros">
        <input type="text" id="busqueda" placeholder="Buscar por t√≠tulo, autor o contenido‚Ä¶">
        <select id="categoria-select">
          <option value="">Todas las categor√≠as</option>
        </select>
      </div>
      <div id="contenedor-articulos" class="art-grid"></div>
    </section>
  </main>
  <footer>
    <p>Herencia Justa es una propuesta ciudadana e iniciativa juvenil de reflexi√≥n pol√≠tica. No representa a un movimiento pol√≠tico registrado ante el Consejo Nacional Electoral.</p>
    <p>¬© 2025 Herencia Justa. Todos los derechos reservados.</p>
  </footer>
  <script>
  // Cargar y mostrar art√≠culos desde articulos.json
  document.addEventListener('DOMContentLoaded', function() {
    const contenedor = document.getElementById('contenedor-articulos');
    const busquedaInput = document.getElementById('busqueda');
    const categoriaSelect = document.getElementById('categoria-select');
    let articulos = [];

    function renderizar(lista) {
      contenedor.innerHTML = '';
      if (!lista.length) {
        contenedor.innerHTML = '<p style="grid-column: 1/-1; color:#666;">No se encontraron art√≠culos.</p>';
        return;
      }
      lista.forEach(art => {
        const card = document.createElement('div');
        card.className = 'art-card';
        const fecha = art.fecha ? new Date(art.fecha).toLocaleDateString('es-EC', { year:'numeric', month:'long', day:'numeric' }) : '';
        const metaTexto = [fecha, art.autor].filter(Boolean).join(' ‚Ä¢ ');
        const excerptLength = 200;
        // Crear excerpt a partir del contenido si no existe resumen
        const fullText = (art.contenido || '').replace(/<[^>]+>/g, '').trim();
        const resumen = art.resumen || (fullText.length > excerptLength ? fullText.slice(0, excerptLength).trimEnd() + '‚Ä¶' : fullText);
        // Construir la tarjeta
        // Determinar contenido visual para la parte superior: imagen o placeholder
        const visual = art.imagen
          ? `<img loading="lazy" src="${art.imagen}" alt="${art.titulo}">`
          : `<div class="art-placeholder">${art.titulo.charAt(0)}</div>`;
        card.innerHTML = `
          ${visual}
          <h3>${art.titulo}</h3>
          ${metaTexto ? `<p class="meta">${metaTexto}</p>` : ''}
          <p class="excerpt">${resumen}</p>
          <div class="full-content">
            ${art.contenido || ''}
          </div>
          <button class="btn-leer-mas" type="button">Leer m√°s</button>
        `;
        // evento para mostrar/ocultar contenido completo
        const btn = card.querySelector('.btn-leer-mas');
        const full = card.querySelector('.full-content');
        btn.addEventListener('click', () => {
          const visible = full.style.display === 'block';
          full.style.display = visible ? 'none' : 'block';
          btn.textContent = visible ? 'Leer m√°s' : 'Leer menos';
        });
        contenedor.appendChild(card);
      });
    }

    function filtrar() {
      const query = busquedaInput.value.toLowerCase();
      const categoria = categoriaSelect.value;
      const filtrados = articulos.filter(a => {
        const texto = `${a.titulo} ${a.autor} ${a.resumen || ''} ${(a.contenido || '').replace(/<[^>]+>/g, '')}`.toLowerCase();
        const coincideCategoria = !categoria || a.categoria === categoria;
        const coincideBusqueda = !query || texto.includes(query);
        return coincideCategoria && coincideBusqueda;
      });
      renderizar(filtrados);
    }

    fetch('articulos.json', { cache: 'no-store' })
      .then(res => res.json())
      .then(data => {
        articulos = data;
        // poblar select de categor√≠as
        const categorias = Array.from(new Set(articulos.map(a => a.categoria).filter(Boolean)));
        categorias.forEach(cat => {
          const opt = document.createElement('option');
          opt.value = cat;
          opt.textContent = cat;
          categoriaSelect.appendChild(opt);
        });
        renderizar(articulos);
      })
      .catch(err => {
        console.error('Error al cargar articulos.json', err);
        contenedor.innerHTML = '<p style="color:#666;">No pudimos cargar los art√≠culos por ahora.</p>';
      });

    busquedaInput.addEventListener('input', filtrar);
    categoriaSelect.addEventListener('change', filtrar);
  });
  </script>
</body>
</html>
